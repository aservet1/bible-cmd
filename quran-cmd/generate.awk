BEGIN {
    print "/* This file is automatically generated. DO NOT EDIT. */"
    print ""
    print "#include \"quran_data.h\""
    print ""
    print "quran_verse quran_verses[] = {"

    verse_count = 0
}

{
	sub(/#.*$/ , "", $0)
	sub(/\s*$/ , "", $0)
	sub(/^\s*$/, "", $0)

	if (length($0) > 0) {
		split($0,parts,"\t")
		Surah = parts[1]
		Ayat  = parts[2]
		Text  = parts[3]
        gsub(/"/,"\\\"",Text)
		printf("    {%d, %d, \"%s\"},\n", Surah, Ayat, Text)
		verse_count++
	}
}

END {
    print "};"
    print ""
    printf("int quran_verses_length = %d;\n", verse_count)
}

